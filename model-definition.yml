kind: Model
apiVersion: v1alpha4
metadata:
  displayName: CityCAT (OpenCLIM)
  type: Modelling
  name: citycat-openclim
  summary: CityCAT is a tool for modelling, analysis and visualisation of surface water flooding.
  description: >
    CityCAT (City Catchment Analysis Tool) is a unique software tool for modelling, analysis and visualisation of
    surface water flooding. CityCAT enables rapid assessment of combined pluvial and fluvial flood risk and allows
    assessment of the effects of different flood alleviation measures.

    When used in return period mode, rainfall events are generated from observations using L-moments.
spec:
  inputs:
    env:
      - name: RAINFALL_MODE
        title: Rainfall mode
        desc: Generate events using return periods or total depth
        options:
          - name: return_periods
            title: Return Periods
          - name: total_depth
            title: Total depth

      - name: RETURN_PERIOD
        title: Return Period (years)
        desc: The return period of the rainfall event
        type: number
        default: 100
        min: 10
        max: 200

      - name: TOTAL_DEPTH
        title: Total depth (mm)
        desc: The total depth of rainfall during the event
        type: number
        default: 40
        min: 10
        max: 100

      - name: DURATION
        title: Duration (hours)
        desc: The duration of the rainfall event
        type: number
        default: 1
        min: 1
        max: 6

      - name: SIZE
        title: Domain Size (km)
        desc: The width and height of the domain to create
        type: number
        default: 5.5
        min: 0.1
        max: 10000

      - name: X
        title: Domain Centroid X (OSGB)
        desc: The X coordinate of the domain centroid in OSGB
        type: integer
        default: 258722
        min: 225379
        max: 311599

      - name: Y
        title: Domain Centroid Y (OSGB)
        desc: The Y coordinate of the domain centroid in OSGB
        type: integer
        default: 665028
        min: 600201
        max: 684815

      - name: POOLING_RADIUS
        title: Pooling radius (km)
        desc: The threshold distance for selecting UKCP cells to pool
        type: integer
        default: 20
        min: 10
        max: 50

    dataslots:
      - name: Digital Elevation Model
        description: Digital Elevation Model
        default:
          - uid: 692b8834-6939-4cec-8b56-4bda1483aec4
            versionUid: 859e810c-4597-44b6-8d92-a9f00e45dcbd
        path: inputs/dem
        required: true

      - name: UKCP18
        description: 5km Climate Data from UKCP18 in OSGB
        default:
          - uid: 05ed95c7-e339-4b9a-9bc8-bb9aad07bc33
            versionUid: bb541d63-38d6-4fce-b431-29b50668df6b
        path: inputs/ukcp
        required: true

      - name: Buildings
        description: Buildings
        default:
          - uid: c601eed8-1195-4a2b-9087-53ef81209d30
            versionUid: e35fe6ce-c05f-467e-92fe-99c631a7e753
        path: inputs/buildings
        required: false


  outputs:
    datasets:
      - name: outputs/run/**/*
        type: folder
        desc: path to model outputs
